#
# Recommended minimum configuration:
#

# Example rule allowing access from your local networks.
# Adapt to list your (internal) IP networks from where browsing
# should be allowed
acl localnet src 0.0.0.1-0.255.255.255  # RFC 1122 "this" network (LAN)
acl localnet src 10.0.0.0/8 # RFC 1918 local private network (LAN)
acl localnet src 100.64.0.0/10 # RFC 6598 shared address space (CGN)
acl localnet src 169.254.0.0/16 # RFC 3927 link-local (directly plugged) machines
acl localnet src 172.16.0.0/12 # RFC 1918 local private network (LAN)
acl localnet src 192.168.0.0/16 # RFC 1918 local private network (LAN)
acl localnet src fc00::/7 # RFC 4193 local private network range
acl localnet src fe80::/10 # RFC 4291 link-local (directly plugged) machines

acl SSL_ports port 443
acl Safe_ports port 80 # http
acl Safe_ports port 21 # ftp
acl Safe_ports port 443 # https
acl Safe_ports port 70 # gopher
acl Safe_ports port 210 # wais
acl Safe_ports port 1025-65535  # unregistered ports
acl Safe_ports port 280 # http-mgmt
acl Safe_ports port 488         # gss-http
acl Safe_ports port 591         # filemaker
acl Safe_ports port 777         # multiling http
acl CONNECT method CONNECT

#
# Recommended minimum Access Permission configuration:
#
# Deny requests to certain unsafe ports
http_access deny !Safe_ports

# Deny CONNECT to other than secure SSL ports
http_access deny CONNECT !SSL_ports

# Only allow cachemgr access from localhost
http_access allow localhost manager
http_access deny manager

# We strongly recommend the following be uncommented to protect innocent
# web applications running on the proxy server who think the only
# one who can access services on "localhost" is a local user
#http_access deny to_localhost

#
# INSERT YOUR OWN RULE(S) HERE TO ALLOW ACCESS FROM YOUR CLIENTS
#

### Microhack ACL's ###
# Test sites
acl microhack-test dstdomain docs.microsoft.com
acl microhack-test dstdomain ipinfo.io
acl microhack-test dstdomain .whatismyipaddress.com

# Office 365 URLs
acl O365_All dstdom_regex -i .*outlook\.office\.com
acl O365_All dstdom_regex -i .*outlook\.office365\.com
acl O365_All dstdom_regex -i .*smtp\.office365\.com
acl O365_All dstdom_regex -i .*r1\.res\.office365\.com
acl O365_All dstdom_regex -i .*r3\.res\.office365\.com
acl O365_All dstdom_regex -i .*r4\.res\.office365\.com
acl O365_All dstdom_regex -i .*outlook\.office\.com
acl O365_All dstdom_regex -i .*outlook\.office365\.com
acl O365_All dstdom_regex -i .*outlook\.office\.com
acl O365_All dstdom_regex -i .*outlook\.office365\.com
acl O365_All dstdom_regex -i .*outlook\.com
acl O365_All dstdom_regex -i .*outlook\.office\.com
acl O365_All dstdom_regex -i .*attachments\.office\.net
acl O365_All dstdom_regex -i .*protection\.outlook\.com
acl O365_All dstdom_regex -i .*mail\.protection\.outlook\.com
acl O365_All dstdom_regex -i .*lync\.com
acl O365_All dstdom_regex -i .*teams\.microsoft\.com
acl O365_All dstdom_regex -i .*teams\.microsoft\.com
acl O365_All dstdom_regex -i .*broadcast\.skype\.com
acl O365_All dstdom_regex -i .*broadcast\.skype\.com
acl O365_All dstdom_regex -i .*sfbassets\.com
acl O365_All dstdom_regex -i .*urlp\.sfbassets\.com
acl O365_All dstdom_regex -i .*skypemaprdsitus\.trafficmanager\.net
acl O365_All dstdom_regex -i .*keydelivery\.mediaservices\.windows\.net
acl O365_All dstdom_regex -i .*msecnd\.net
acl O365_All dstdom_regex -i .*streaming\.mediaservices\.windows\.net
acl O365_All dstdom_regex -i .*ajax\.aspnetcdn\.com
acl O365_All dstdom_regex -i .*mlccdn\.blob\.core\.windows\.net
acl O365_All dstdom_regex -i .*aka\.ms
acl O365_All dstdom_regex -i .*amp\.azure\.net
acl O365_All dstdom_regex -i .*users\.storage\.live\.com
acl O365_All dstdom_regex -i .*adl\.windows\.com
acl O365_All dstdom_regex -i .*skypeforbusiness\.com
acl O365_All dstdom_regex -i .*msedge\.net
acl O365_All dstdom_regex -i .*compass-ssl\.microsoft\.com
acl O365_All dstdom_regex -i .*mstea\.ms
acl O365_All dstdom_regex -i .*secure\.skypeassets\.com
acl O365_All dstdom_regex -i .*mlccdnprod\.azureedge\.net
acl O365_All dstdom_regex -i .*videoplayercdn\.osi\.office\.net
acl O365_All dstdom_regex -i .*tenor\.com
acl O365_All dstdom_regex -i .*sharepoint\.com
acl O365_All dstdom_regex -i .*log\.optimizely\.com
acl O365_All dstdom_regex -i .*ssw\.live\.com
acl O365_All dstdom_regex -i .*storage\.live\.com
acl O365_All dstdom_regex -i .*search\.production\.apac\.trafficmanager\.net
acl O365_All dstdom_regex -i .*search\.production\.emea\.trafficmanager\.net
acl O365_All dstdom_regex -i .*search\.production\.us\.trafficmanager\.net
acl O365_All dstdom_regex -i .*wns\.windows\.com
acl O365_All dstdom_regex -i .*admin\.onedrive\.com
acl O365_All dstdom_regex -i .*officeclient\.microsoft\.com
acl O365_All dstdom_regex -i .*g\.live\.com
acl O365_All dstdom_regex -i .*oneclient\.sfx\.ms
acl O365_All dstdom_regex -i .*sharepointonline\.com
acl O365_All dstdom_regex -i .*cdn\.sharepointonline\.com
acl O365_All dstdom_regex -i .*privatecdn\.sharepointonline\.com
acl O365_All dstdom_regex -i .*publiccdn\.sharepointonline\.com
acl O365_All dstdom_regex -i .*spoprod-a\.akamaihd\.net
acl O365_All dstdom_regex -i .*static\.sharepointonline\.com
acl O365_All dstdom_regex -i .*prod\.msocdn\.com
acl O365_All dstdom_regex -i .*watson\.telemetry\.microsoft\.com
acl O365_All dstdom_regex -i .*svc\.ms
acl O365_All dstdom_regex -i .**-files\.sharepoint\.com
acl O365_All dstdom_regex -i .**-myfiles\.sharepoint\.com
acl O365_All dstdom_regex -i .*ajax\.aspnetcdn\.com
acl O365_All dstdom_regex -i .*r3\.res\.outlook\.com
acl O365_All dstdom_regex -i .*spoprod-a\.akamaihd\.net
acl O365_All dstdom_regex -i .*api\.microsoftstream\.com
acl O365_All dstdom_regex -i .*notification\.api\.microsoftstream\.com
acl O365_All dstdom_regex -i .*amp\.azure\.net
acl O365_All dstdom_regex -i .*api\.microsoftstream\.com
acl O365_All dstdom_regex -i .*s0\.assets-yammer\.com
acl O365_All dstdom_regex -i .*vortex\.data\.microsoft\.com
acl O365_All dstdom_regex -i .*web\.microsoftstream\.com
acl O365_All dstdom_regex -i .*amsglob0cdnstream13\.azureedge\.net
acl O365_All dstdom_regex -i .*amsglob0cdnstream14\.azureedge\.net
acl O365_All dstdom_regex -i .*nps\.onyx\.azure\.net
acl O365_All dstdom_regex -i .*azureedge\.net
acl O365_All dstdom_regex -i .*media\.azure\.net
acl O365_All dstdom_regex -i .*streaming\.mediaservices\.windows\.net
acl O365_All dstdom_regex -i .*keydelivery\.mediaservices\.windows\.net
acl O365_All dstdom_regex -i .*streaming\.mediaservices\.windows\.net
acl O365_All dstdom_regex -i .*online\.office\.com
acl O365_All dstdom_regex -i .**broadcast\.officeapps\.live\.com
acl O365_All dstdom_regex -i .**excel\.officeapps\.live\.com
acl O365_All dstdom_regex -i .**onenote\.officeapps\.live\.com
acl O365_All dstdom_regex -i .**powerpoint\.officeapps\.live\.com
acl O365_All dstdom_regex -i .**rtc\.officeapps\.live\.com
acl O365_All dstdom_regex -i .**shared\.officeapps\.live\.com
acl O365_All dstdom_regex -i .**view\.officeapps\.live\.com
acl O365_All dstdom_regex -i .**visio\.officeapps\.live\.com
acl O365_All dstdom_regex -i .**word-edit\.officeapps\.live\.com
acl O365_All dstdom_regex -i .*office\.live\.com
acl O365_All dstdom_regex -i .*cdn\.office\.net
acl O365_All dstdom_regex -i .*contentstorage\.osi\.office\.net
acl O365_All dstdom_regex -i .*onenote\.com
acl O365_All dstdom_regex -i .*microsoft\.com
acl O365_All dstdom_regex -i .*msecnd\.net
acl O365_All dstdom_regex -i .*office\.net
acl O365_All dstdom_regex -i .**cdn\.onenote\.net
acl O365_All dstdom_regex -i .*ad\.atdmt\.com
acl O365_All dstdom_regex -i .*s\.ytimg\.com
acl O365_All dstdom_regex -i .*www\.youtube\.com
acl O365_All dstdom_regex -i .*ajax\.aspnetcdn\.com
acl O365_All dstdom_regex -i .*apis\.live\.net
acl O365_All dstdom_regex -i .*cdn\.optimizely\.com
acl O365_All dstdom_regex -i .*officeapps\.live\.com
acl O365_All dstdom_regex -i .*www\.onedrive\.com
acl O365_All dstdom_regex -i .*msftidentity\.com
acl O365_All dstdom_regex -i .*msidentity\.com
acl O365_All dstdom_regex -i .*account\.activedirectory\.windowsazure\.com
acl O365_All dstdom_regex -i .*accounts\.accesscontrol\.windows\.net
acl O365_All dstdom_regex -i .*adminwebservice\.microsoftonline\.com
acl O365_All dstdom_regex -i .*api\.passwordreset\.microsoftonline\.com
acl O365_All dstdom_regex -i .*autologon\.microsoftazuread-sso\.com
acl O365_All dstdom_regex -i .*becws\.microsoftonline\.com
acl O365_All dstdom_regex -i .*clientconfig\.microsoftonline-p\.net
acl O365_All dstdom_regex -i .*companymanager\.microsoftonline\.com
acl O365_All dstdom_regex -i .*device\.login\.microsoftonline\.com
acl O365_All dstdom_regex -i .*graph\.microsoft\.com
acl O365_All dstdom_regex -i .*graph\.windows\.net
acl O365_All dstdom_regex -i .*login\.microsoft\.com
acl O365_All dstdom_regex -i .*login\.microsoftonline\.com
acl O365_All dstdom_regex -i .*login\.microsoftonline-p\.com
acl O365_All dstdom_regex -i .*login\.windows\.net
acl O365_All dstdom_regex -i .*logincert\.microsoftonline\.com
acl O365_All dstdom_regex -i .*loginex\.microsoftonline\.com
acl O365_All dstdom_regex -i .*login-us\.microsoftonline\.com
acl O365_All dstdom_regex -i .*nexus\.microsoftonline-p\.com
acl O365_All dstdom_regex -i .*passwordreset\.microsoftonline\.com
acl O365_All dstdom_regex -i .*provisioningapi\.microsoftonline\.com
acl O365_All dstdom_regex -i .*hip\.live\.com
acl O365_All dstdom_regex -i .*microsoftonline\.com
acl O365_All dstdom_regex -i .*microsoftonline-p\.com
acl O365_All dstdom_regex -i .*msauth\.net
acl O365_All dstdom_regex -i .*msauthimages\.net
acl O365_All dstdom_regex -i .*msecnd\.net
acl O365_All dstdom_regex -i .*msftauth\.net
acl O365_All dstdom_regex -i .*msftauthimages\.net
acl O365_All dstdom_regex -i .*phonefactor\.net
acl O365_All dstdom_regex -i .*enterpriseregistration\.windows\.net
acl O365_All dstdom_regex -i .*management\.azure\.com
acl O365_All dstdom_regex -i .*policykeyservice\.dc\.ad\.msft\.net
acl O365_All dstdom_regex -i .*manage\.office\.com
acl O365_All dstdom_regex -i .*protection\.office\.com
acl O365_All dstdom_regex -i .*manage\.office\.com
acl O365_All dstdom_regex -i .*protection\.office\.com
acl O365_All dstdom_regex -i .*portal\.cloudappsecurity\.com
acl O365_All dstdom_regex -i .*account\.office\.net
acl O365_All dstdom_regex -i .*admin\.microsoft\.com
acl O365_All dstdom_regex -i .*home\.office\.com
acl O365_All dstdom_regex -i .*portal\.office\.com
acl O365_All dstdom_regex -i .*www\.office\.com
acl O365_All dstdom_regex -i .*suite\.office\.net
acl O365_All dstdom_regex -i .*blob\.core\.windows\.net
acl O365_All dstdom_regex -i .*helpshift\.com
acl O365_All dstdom_regex -i .*localytics\.com
acl O365_All dstdom_regex -i .*analytics\.localytics\.com
acl O365_All dstdom_regex -i .*api\.localytics\.com
acl O365_All dstdom_regex -i .*connect\.facebook\.net
acl O365_All dstdom_regex -i .*firstpartyapps\.oaspapps\.com
acl O365_All dstdom_regex -i .*outlook\.uservoice\.com
acl O365_All dstdom_regex -i .*prod\.firstpartyapps\.oaspapps\.com\.akadns\.net
acl O365_All dstdom_regex -i .*rink\.hockeyapp\.net
acl O365_All dstdom_regex -i .*sdk\.hockeyapp\.net
acl O365_All dstdom_regex -i .*telemetryservice\.firstpartyapps\.oaspapps\.com
acl O365_All dstdom_regex -i .*web\.localytics\.com
acl O365_All dstdom_regex -i .*webanalytics\.localytics\.com
acl O365_All dstdom_regex -i .*wus-firstpartyapps\.oaspapps\.com
acl O365_All dstdom_regex -i .*aria\.microsoft\.com
acl O365_All dstdom_regex -i .*events\.data\.microsoft\.com
acl O365_All dstdom_regex -i .*o365weve\.com
acl O365_All dstdom_regex -i .*amp\.azure\.net
acl O365_All dstdom_regex -i .*appsforoffice\.microsoft\.com
acl O365_All dstdom_regex -i .*assets\.onestore\.ms
acl O365_All dstdom_regex -i .*auth\.gfx\.ms
acl O365_All dstdom_regex -i .*c1\.microsoft\.com
acl O365_All dstdom_regex -i .*contentstorage\.osi\.office\.net
acl O365_All dstdom_regex -i .*dgps\.support\.microsoft\.com
acl O365_All dstdom_regex -i .*docs\.microsoft\.com
acl O365_All dstdom_regex -i .*msdn\.microsoft\.com
acl O365_All dstdom_regex -i .*platform\.linkedin\.com
acl O365_All dstdom_regex -i .*prod\.msocdn\.com
acl O365_All dstdom_regex -i .*shellprod\.msocdn\.com
acl O365_All dstdom_regex -i .*support\.content\.office\.net
acl O365_All dstdom_regex -i .*support\.microsoft\.com
acl O365_All dstdom_regex -i .*technet\.microsoft\.com
acl O365_All dstdom_regex -i .*videocontent\.osi\.office\.net
acl O365_All dstdom_regex -i .*videoplayercdn\.osi\.office\.net
acl O365_All dstdom_regex -i .*office365\.com
acl O365_All dstdom_regex -i .*cloudapp\.net
acl O365_All dstdom_regex -i .*aadrm\.com
acl O365_All dstdom_regex -i .*azurerms\.com
acl O365_All dstdom_regex -i .*informationprotection\.azure\.com
acl O365_All dstdom_regex -i .*ecn\.dev\.virtualearth\.net
acl O365_All dstdom_regex -i .*informationprotection\.hosting\.portal\.azure\.net
acl O365_All dstdom_regex -i .*testconnectivity\.microsoft\.com
acl O365_All dstdom_regex -i .*hockeyapp\.net
acl O365_All dstdom_regex -i .*sharepointonline\.com
acl O365_All dstdom_regex -i .*cdn\.forms\.office\.net
acl O365_All dstdom_regex -i .*dc\.applicationinsights\.microsoft\.com
acl O365_All dstdom_regex -i .*dc\.services\.visualstudio\.com
acl O365_All dstdom_regex -i .*forms\.microsoft\.com
acl O365_All dstdom_regex -i .*mem\.gfx\.ms
acl O365_All dstdom_regex -i .*office365servicehealthcommunications\.cloudapp\.net
acl O365_All dstdom_regex -i .*osiprod-cus-daffodil-signalr-00\.service\.signalr\.net
acl O365_All dstdom_regex -i .*osiprod-neu-daffodil-signalr-00\.service\.signalr\.net
acl O365_All dstdom_regex -i .*osiprod-weu-daffodil-signalr-00\.service\.signalr\.net
acl O365_All dstdom_regex -i .*osiprod-wus-daffodil-signalr-00\.service\.signalr\.net
acl O365_All dstdom_regex -i .*signup\.microsoft\.com
acl O365_All dstdom_regex -i .*staffhub\.ms
acl O365_All dstdom_regex -i .*staffhub\.uservoice\.com
acl O365_All dstdom_regex -i .*staffhubweb\.azureedge\.net
acl O365_All dstdom_regex -i .*watson\.telemetry\.microsoft\.com
acl O365_All dstdom_regex -i .*nexus\.officeapps\.live\.com
acl O365_All dstdom_regex -i .*nexusrules\.officeapps\.live\.com
acl O365_All dstdom_regex -i .*portal\.microsoftonline\.com
acl O365_All dstdom_regex -i .*microsoft\.com
acl O365_All dstdom_regex -i .*msocdn\.com
acl O365_All dstdom_regex -i .*office\.net
acl O365_All dstdom_regex -i .*onmicrosoft\.com
acl O365_All dstdom_regex -i .*o15\.officeredir\.microsoft\.com
acl O365_All dstdom_regex -i .*ocsredir\.officeapps\.live\.com
acl O365_All dstdom_regex -i .*officepreviewredir\.microsoft\.com
acl O365_All dstdom_regex -i .*officeredir\.microsoft\.com
acl O365_All dstdom_regex -i .*r\.office\.microsoft\.com
acl O365_All dstdom_regex -i .*ocws\.officeapps\.live\.com
acl O365_All dstdom_regex -i .*odc\.officeapps\.live\.com
acl O365_All dstdom_regex -i .*roaming\.officeapps\.live\.com
acl O365_All dstdom_regex -i .*activation\.sls\.microsoft\.com
acl O365_All dstdom_regex -i .*crl\.microsoft\.com
acl O365_All dstdom_regex -i .*ols\.officeapps\.live\.com
acl O365_All dstdom_regex -i .*office15client\.microsoft\.com
acl O365_All dstdom_regex -i .*officeclient\.microsoft\.com
acl O365_All dstdom_regex -i .*ocsa\.officeapps\.live\.com
acl O365_All dstdom_regex -i .*insertmedia\.bing\.office\.net
acl O365_All dstdom_regex -i .*go\.microsoft\.com
acl O365_All dstdom_regex -i .*support\.office\.com
acl O365_All dstdom_regex -i .*mrodevicemgr\.officeapps\.live\.com
acl O365_All dstdom_regex -i .*ajax\.aspnetcdn\.com
acl O365_All dstdom_regex -i .*cdn\.odc\.officeapps\.live\.com
acl O365_All dstdom_regex -i .*officecdn\.microsoft\.com
acl O365_All dstdom_regex -i .*officecdn\.microsoft\.com\.edgesuite\.net
acl O365_All dstdom_regex -i .*virtualearth\.net
acl O365_All dstdom_regex -i .*ajax\.microsoft\.com
acl O365_All dstdom_regex -i .*c\.bing\.net
acl O365_All dstdom_regex -i .*excelbingmap\.firstpartyapps\.oaspapps\.com
acl O365_All dstdom_regex -i .*excelcs\.officeapps\.live\.com
acl O365_All dstdom_regex -i .*ocos-office365-s2s\.msedge\.net
acl O365_All dstdom_regex -i .*omextemplates\.content\.office\.net
acl O365_All dstdom_regex -i .*peoplegraph\.firstpartyapps\.oaspapps\.com
acl O365_All dstdom_regex -i .*pptcs\.officeapps\.live\.com
acl O365_All dstdom_regex -i .*tse1\.mm\.bing\.net
acl O365_All dstdom_regex -i .*uci\.officeapps\.live\.com
acl O365_All dstdom_regex -i .*watson\.microsoft\.com
acl O365_All dstdom_regex -i .*wikipedia\.firstpartyapps\.oaspapps\.com
acl O365_All dstdom_regex -i .*wordcs\.officeapps\.live\.com
acl O365_All dstdom_regex -i .*www\.bing\.com
acl O365_All dstdom_regex -i .*acompli\.net
acl O365_All dstdom_regex -i .*outlookmobile\.com
acl O365_All dstdom_regex -i .*manage\.microsoft\.com
acl O365_All dstdom_regex -i .*api\.office\.com
acl O365_All dstdom_regex -i .*go\.microsoft\.com
acl O365_All dstdom_regex -i .*login\.windows-ppe\.net
acl O365_All dstdom_regex -i .*secure\.aadcdn\.microsoftonline-p\.com
acl O365_All dstdom_regex -i .*vortex\.data\.microsoft\.com
acl O365_All dstdom_regex -i .*account\.live\.com
acl O365_All dstdom_regex -i .*apis\.live\.net
acl O365_All dstdom_regex -i .*auth\.gfx\.ms
acl O365_All dstdom_regex -i .*login\.live\.com
acl O365_All dstdom_regex -i .*accounts\.google\.com
acl O365_All dstdom_regex -i .*mail\.google\.com
acl O365_All dstdom_regex -i .*www\.googleapis\.com
acl O365_All dstdom_regex -i .*api\.login\.yahoo\.com
acl O365_All dstdom_regex -i .*social\.yahooapis\.com
acl O365_All dstdom_regex -i .*api\.dropboxapi\.com
acl O365_All dstdom_regex -i .*www\.dropbox\.com
acl O365_All dstdom_regex -i .*app\.box\.com
acl O365_All dstdom_regex -i .*graph\.facebook\.com
acl O365_All dstdom_regex -i .*m\.facebook\.com
acl O365_All dstdom_regex -i .*www\.evernote\.com
acl O365_All dstdom_regex -i .*bit\.ly
acl O365_All dstdom_regex -i .*www\.acompli\.com
acl O365_All dstdom_regex -i .*by\.uservoice\.com
acl O365_All dstdom_regex -i .*outlook\.uservoice\.com
acl O365_All dstdom_regex -i .*data\.flurry\.com
acl O365_All dstdom_regex -i .*app\.adjust\.com
acl O365_All dstdom_regex -i .*rink\.hockeyapp\.net
acl O365_All dstdom_regex -i .*sdk\.hockeyapp\.net
acl O365_All dstdom_regex -i .*acompli\.helpshift\.com
acl O365_All dstdom_regex -i .*play\.google\.com
acl O365_All dstdom_regex -i .*appex\.bing\.com
acl O365_All dstdom_regex -i .*appex-rf\.msn\.com
acl O365_All dstdom_regex -i .*itunes\.apple\.com
acl O365_All dstdom_regex -i .*c\.bing\.com
acl O365_All dstdom_regex -i .*c\.live\.com
acl O365_All dstdom_regex -i .*cl2\.apple\.com
acl O365_All dstdom_regex -i .*d\.docs\.live\.net
acl O365_All dstdom_regex -i .*directory\.services\.live\.com
acl O365_All dstdom_regex -i .*docs\.live\.net
acl O365_All dstdom_regex -i .*en-us\.appex-rf\.msn\.com
acl O365_All dstdom_regex -i .*foodanddrink\.services\.appex\.bing\.com
acl O365_All dstdom_regex -i .*odcsm\.officeapps\.live\.com
acl O365_All dstdom_regex -i .*office\.microsoft\.com
acl O365_All dstdom_regex -i .*partnerservices\.getmicrosoftkey\.com
acl O365_All dstdom_regex -i .*roaming\.officeapps\.live\.com
acl O365_All dstdom_regex -i .*sas\.office\.microsoft\.com
acl O365_All dstdom_regex -i .*signup\.live\.com
acl O365_All dstdom_regex -i .*view\.atdmt\.com
acl O365_All dstdom_regex -i .*watson\.telemetry\.microsoft\.com
acl O365_All dstdom_regex -i .*weather\.tile\.appex\.bing\.com
acl O365_All dstdom_regex -i .*api\.meetup\.com
acl O365_All dstdom_regex -i .*secure\.meetup\.com
acl O365_All dstdom_regex -i .*account\.live\.com
acl O365_All dstdom_regex -i .*auth\.gfx\.ms
acl O365_All dstdom_regex -i .*c\.bing\.com
acl O365_All dstdom_regex -i .*c\.live\.com
acl O365_All dstdom_regex -i .*cl2\.apple\.com
acl O365_All dstdom_regex -i .*directory\.services\.live\.com
acl O365_All dstdom_regex -i .*docs\.live\.net
acl O365_All dstdom_regex -i .*en-us\.appex-rf\.msn\.com
acl O365_All dstdom_regex -i .*foodanddrink\.services\.appex\.bing\.com
acl O365_All dstdom_regex -i .*go\.microsoft\.com
acl O365_All dstdom_regex -i .*login\.live\.com
acl O365_All dstdom_regex -i .*office\.microsoft\.com
acl O365_All dstdom_regex -i .*p100-sandbox\.itunes\.apple\.com
acl O365_All dstdom_regex -i .*partnerservices\.getmicrosoftkey\.com
acl O365_All dstdom_regex -i .*roaming\.officeapps\.live\.com
acl O365_All dstdom_regex -i .*sas\.office\.microsoft\.com
acl O365_All dstdom_regex -i .*signup\.live\.com
acl O365_All dstdom_regex -i .*view\.atdmt\.com
acl O365_All dstdom_regex -i .*watson\.telemetry\.microsoft\.com
acl O365_All dstdom_regex -i .*weather\.tile\.appex\.bing\.com
acl O365_All dstdom_regex -i .*yammer\.com
acl O365_All dstdom_regex -i .*yammerusercontent\.com
acl O365_All dstdom_regex -i .*assets-yammer\.com
acl O365_All dstdom_regex -i .*ajax\.aspnetcdn\.com
acl O365_All dstdom_regex -i .*www\.outlook\.com
acl O365_All dstdom_regex -i .*eus-www\.sway-cdn\.com
acl O365_All dstdom_regex -i .*eus-www\.sway-extensions\.com
acl O365_All dstdom_regex -i .*wus-www\.sway-cdn\.com
acl O365_All dstdom_regex -i .*wus-www\.sway-extensions\.com
acl O365_All dstdom_regex -i .*www\.google-analytics\.com
acl O365_All dstdom_regex -i .*sway\.com
acl O365_All dstdom_regex -i .*www\.sway\.com
acl O365_All dstdom_regex -i .*entrust\.net
acl O365_All dstdom_regex -i .*geotrust\.com
acl O365_All dstdom_regex -i .*omniroot\.com
acl O365_All dstdom_regex -i .*public-trust\.com
acl O365_All dstdom_regex -i .*symcb\.com
acl O365_All dstdom_regex -i .*symcd\.com
acl O365_All dstdom_regex -i .*verisign\.com
acl O365_All dstdom_regex -i .*verisign\.net
acl O365_All dstdom_regex -i .*apps\.identrust\.com
acl O365_All dstdom_regex -i .*cacerts\.digicert\.com
acl O365_All dstdom_regex -i .*cert\.int-x3\.letsencrypt\.org
acl O365_All dstdom_regex -i .*crl\.globalsign\.com
acl O365_All dstdom_regex -i .*crl\.globalsign\.net
acl O365_All dstdom_regex -i .*crl\.identrust\.com
acl O365_All dstdom_regex -i .*crl\.microsoft\.com
acl O365_All dstdom_regex -i .*crl3\.digicert\.com
acl O365_All dstdom_regex -i .*crl4\.digicert\.com
acl O365_All dstdom_regex -i .*isrg\.trustid\.ocsp\.identrust\.com
acl O365_All dstdom_regex -i .*mscrl\.microsoft\.com
acl O365_All dstdom_regex -i .*ocsp\.digicert\.com
acl O365_All dstdom_regex -i .*ocsp\.globalsign\.com
acl O365_All dstdom_regex -i .*ocsp\.int-x3\.letsencrypt\.org
acl O365_All dstdom_regex -i .*ocsp\.msocsp\.com
acl O365_All dstdom_regex -i .*ocsp2\.globalsign\.com
acl O365_All dstdom_regex -i .*ocspx\.digicert\.com
acl O365_All dstdom_regex -i .*secure\.globalsign\.com
acl O365_All dstdom_regex -i .*www\.digicert\.com
acl O365_All dstdom_regex -i .*www\.microsoft\.com
acl O365_All dstdom_regex -i .*officespeech\.platform\.bing\.com
acl O365_All dstdom_regex -i .*skype\.com
acl O365_All dstdom_regex -i .*config\.office\.net
acl O365_All dstdom_regex -i .*manage\.microsoft\.com
acl O365_All dstdom_regex -i .*lpcres\.delve\.office\.com
acl O365_All dstdom_regex -i .*statics\.teams\.microsoft\.com
acl O365_All dstdom_regex -i .*office\.com
acl O365_All dstdom_regex -i .*cdnprod\.myanalytics\.microsoft\.com
acl O365_All dstdom_regex -i .*myanalytics\.microsoft\.com
acl O365_All dstdom_regex -i .*myanalytics-gcc\.microsoft\.com
acl O365_All dstdom_regex -i .*workplaceanalytics\.cdn\.office\.net
acl O365_All dstdom_regex -i .*workplaceanalytics\.office\.com
acl O365_All dstdom_regex -i .*officeconfig\.msocdn\.com
acl O365_All dstdom_regex -i .*microsoftusercontent\.com
acl O365_All dstdom_regex -i .*azure-apim\.net
acl O365_All dstdom_regex -i .*flow\.microsoft\.com
acl O365_All dstdom_regex -i .*powerapps\.com
acl O365_All dstdom_regex -i .*autodiscover\.*\.onmicrosoft\.com
acl O365_All dstdom_regex -i .*activity\.windows\.com
 


# Example rule allowing access from your local networks.
# Adapt localnet in the ACL section to list your (internal) IP networks
# from where browsing should be allowed
#http_access allow localnet
#http_access allow localhost

http_access allow microhack-test
http_access allow O365_All

# And finally deny all other access to this proxy
http_access deny all

# Squid normally listens to port 3128
http_port 3128

# Uncomment and adjust the following to add a disk cache directory.
#cache_dir ufs /var/spool/squid 100 16 256

# Leave coredumps in the first cache dir
coredump_dir /var/spool/squid

#
# Add any of your own refresh_pattern entries above these.
#
refresh_pattern ^ftp:             1440    20%     10080
refresh_pattern ^gopher:          1440    0%      1440
refresh_pattern -i (/cgi-bin/|\?) 0       0%      0
refresh_pattern .                 0       20%     4320
